<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–∞–ª–µ—Ä–µ—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–æ–≤</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        .photographer-card {
            border: 1px solid #ccc;
            border-radius: 10px;
            padding: 15px;
            margin: 10px;
            display: inline-block;
            width: 250px;
            text-align: center;
            background: #f9f9f9;
        }
        .avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
        }
        .stars {
            color: gold;
            font-size: 20px;
        }
    </style>
</head>
<body>

    <h1>üì∏ –ì–∞–ª–µ—Ä–µ—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–æ–≤</h1>
    <div id="gallery"></div>

    <script>
        async function fetchPhotographers() {
            try {
                const response = await fetch('/photographers');
                const photographers = await response.json();

                console.log("üìä –î–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞:", photographers); // –õ–æ–≥ –¥–∞–Ω–Ω—ã—Ö –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

                const gallery = document.getElementById('gallery');
                gallery.innerHTML = '';

                photographers.forEach(photographer => {
                    console.log(`üì∑ ${photographer.name} —Ä–µ–π—Ç–∏–Ω–≥: ${photographer.rating}`); // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞

                    const card = document.createElement('div');
                    card.classList.add('photographer-card');

                    card.innerHTML = `
                        <img class="avatar" src="${photographer.avatar}" alt="–ê–≤–∞—Ç–∞—Ä">
                        <h3>${photographer.name}</h3>
                        <p>${photographer.bio}</p>
                        <p class="stars">${getStars(photographer.rating)}</p>
                        <button onclick="selectPhotographer('${photographer.name}')">–í—ã–±—Ä–∞—Ç—å</button>
                    `;
                    gallery.appendChild(card);
                });

            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–æ–≤:', error);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∑–≤—ë–∑–¥–æ—á–µ–∫ –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É
        function getStars(rating) {
            console.log(`‚≠ê –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∑–≤–µ–∑–¥—ã –¥–ª—è —Ä–µ–π—Ç–∏–Ω–≥–∞: ${rating}`); // –õ–æ–≥ –≤ –∫–æ–Ω—Å–æ–ª—å

            const fullStars = Math.floor(rating); // –ü–æ–ª–Ω—ã–µ –∑–≤–µ–∑–¥—ã
            const halfStar = rating % 1 >= 0.5 ? '‚≠êÔ∏è' : ''; // –ü–æ–ª–æ–≤–∏–Ω–∫–∞, –µ—Å–ª–∏ 0.5
            const emptyStars = 5 - fullStars - (halfStar ? 1 : 0); // –ü—É—Å—Ç—ã–µ –∑–≤–µ–∑–¥—ã

            return '‚≠ê'.repeat(fullStars) + halfStar + '‚òÜ'.repeat(emptyStars);
        }

        function selectPhotographer(name) {
            alert(`–í—ã –≤—ã–±—Ä–∞–ª–∏ ${name}!`);
        }

        fetchPhotographers();
    </script>

</body>
</html>
